<!DOCTYPE html>

<html>
<head>
    <title>Chat</title>
</head>
<body>

<!--move redirect button-->
<div>
    <h1>CCTV Streaming</h1>
    <div>
        <button onclick="window.location.href='http://localhost:8080/2-1'">2-1</button>
        <button onclick="window.location.href='http://localhost:8080/2-2'">2-2</button>
        <button onclick="window.location.href='http://localhost:8080/2-3'">2-3</button>
        <button onclick="window.location.href='http://localhost:8080/2-4'">2-4</button>
        <button onclick="window.location.href='http://localhost:8080/2-5'">2-5</button>
        <button onclick="window.location.href='http://localhost:8080/2-6'">2-6</button>
        <button onclick="window.location.href='http://localhost:8080/2-7'">2-7</button>
        <button onclick="window.location.href='http://localhost:8080/2-8'">2-8</button>
        <button onclick="window.location.href='http://localhost:8080/2-9'">2-9</button>
        <button onclick="window.location.href='http://localhost:8080/2-10'">2-10</button>
        <button onclick="window.location.href='http://localhost:8080/2-11'">2-11</button>
        <button onclick="window.location.href='http://localhost:8080/2-12'">2-12</button>
        <button onclick="window.location.href='http://localhost:8080/2-13'">2-13</button>
        <button onclick="window.location.href='http://localhost:8080/2-14'">2-14</button>
        <button onclick="window.location.href='http://localhost:8080/2-15'">2-15</button>
        <button onclick="window.location.href='http://localhost:8080/2-16'">2-16</button>
        <button onclick="window.location.href='http://localhost:8080/2-17'">2-17</button>
        <button onclick="window.location.href='http://localhost:8080/2-18'">2-18</button>
        <button onclick="window.location.href='http://localhost:8080/2-19'">2-19</button>
        <button onclick="window.location.href='http://localhost:8080/2-20'">2-20</button>
    </div>
    <div>
        <button onclick="window.location.href='http://localhost:8080/1-1'">1-1</button>
        <button onclick="window.location.href='http://localhost:8080/1-2'">1-2</button>
        <button onclick="window.location.href='http://localhost:8080/1-3'">1-3</button>
        <button onclick="window.location.href='http://localhost:8080/1-4'">1-4</button>
        <button onclick="window.location.href='http://localhost:8080/1-5'">1-5</button>
        <button onclick="window.location.href='http://localhost:8080/1-6'">1-6</button>
        <button onclick="window.location.href='http://localhost:8080/1-7'">1-7</button>
        <button onclick="window.location.href='http://localhost:8080/1-8'">1-8</button>
        <button onclick="window.location.href='http://localhost:8080/1-9'">1-9</button>
        <button onclick="window.location.href='http://localhost:8080/1-10'">1-10</button>
        <button onclick="window.location.href='http://localhost:8080/1-11'">1-11</button>
        <button onclick="window.location.href='http://localhost:8080/1-12'">1-12</button>
        <button onclick="window.location.href='http://localhost:8080/1-13'">1-13</button>
        <button onclick="window.location.href='http://localhost:8080/1-14'">1-14</button>
        <button onclick="window.location.href='http://localhost:8080/1-15'">1-15</button>
        <button onclick="window.location.href='http://localhost:8080/1-16'">1-16</button>
        <button onclick="window.location.href='http://localhost:8080/1-17'">1-17</button>
        <button onclick="window.location.href='http://localhost:8080/1-18'">1-18</button>
        <button onclick="window.location.href='http://localhost:8080/1-19'">1-19</button>
        <button onclick="window.location.href='http://localhost:8080/1-20'">1-20</button>
    </div>

    <div>
        <button onclick="window.location.href='http://localhost:8080/rgb'">rgb</button>
        <button onclick="window.location.href='http://localhost:8080/thermal'">thermal</button>
    </div>


</div>


<div>

</div>

<div>
    <img id="image"/>
</div>

<script>


    let currentLocation = window.location;
    let camIdx = currentLocation.href.split("/")[3];

    let ws = new WebSocket(`ws://localhost:8080/ws/client/${camIdx}`);
    console.log(`ws://localhost:8080/ws/client/${camIdx}`)
    ws.onmessage = function (event) {
        var urlCreator = window.URL || window.webkitURL;
        var imageUrl = urlCreator.createObjectURL(event.data);
        document.querySelector("#image").src = imageUrl;
    };


</script>
</body>
</html>